{"remainingRequest":"C:\\Users\\Monya\\Desktop\\my-project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Monya\\Desktop\\my-project\\src\\views\\book\\BookListPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Monya\\Desktop\\my-project\\src\\views\\book\\BookListPage.vue","mtime":1556264589654},{"path":"C:\\Users\\Monya\\Desktop\\my-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1555329071562},{"path":"C:\\Users\\Monya\\Desktop\\my-project\\node_modules\\babel-loader\\lib\\index.js","mtime":1555329027271},{"path":"C:\\Users\\Monya\\Desktop\\my-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1555329071562},{"path":"C:\\Users\\Monya\\Desktop\\my-project\\node_modules\\vue-loader\\lib\\index.js","mtime":1555329073101}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport HeadInfo from '@/components/tools/HeadInfo'\r\nimport { getBookList, getPagedBookList, deleteBookById } from '../../api/book'\r\n\r\nexport default {\r\n  name: 'BookListPage',\r\n  components: {\r\n    HeadInfo\r\n  },\r\n  data() {\r\n    return {\r\n      bookList: [],\r\n      current: 1,\r\n      total: 4,\r\n      pageSize: 3\r\n    }\r\n  },\r\n  created() {\r\n    // getBookList().then(res => {\r\n    //   // console.log(eval(res))\r\n    //   console.log(res.data)\r\n    //   this.bookList = res.data\r\n    // })\r\n    //分页\r\n    getPagedBookList(this.current, this.pageSize).then(res => {\r\n      console.log(res)\r\n      var data = res.result.data\r\n      // for(var i=0;i<data.length;i++){\r\n      //   data[i].avatar = \"http://localhost:91/images/\"+data[i].avatar\r\n      // }\r\n      this.bookList = data\r\n      this.total = res.result.total\r\n    })\r\n  },\r\n  methods: {\r\n    onChange(current) {\r\n      this.current = current\r\n      getPagedBookList(this.current, this.pageSize).then(res => {\r\n        // console.log(res)\r\n        var data = res.result.data\r\n        // for(var i=0;i<data.length;i++){\r\n        //   data[i].avatar = \"http://localhost:91/images/\"+data[i].avatar\r\n        // }\r\n        this.bookList = data\r\n        this.total = res.result.total\r\n      })\r\n    },\r\n    // on_Click(bookid){\r\n    //   this.$router.push({name:'BookDetailPage',params:{ id: bookid}})\r\n    // },\r\n    confirm(e) {\r\n      // console.log(e)\r\n      this.onDelete(e)\r\n    },\r\n    onDelete(bookid) {\r\n      // console.log(bookid)\r\n      deleteBookById(bookid).then(res => {\r\n        if (res.result === 'success') {\r\n          console.log(res.bookid)\r\n          this.$message.success('删除成功')\r\n        } else {\r\n          this.$message.error('删除失败')\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["BookListPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BookListPage.vue","sourceRoot":"src/views/book","sourcesContent":["<template>\r\n  <div>\r\n    <a-card :bordered=\"false\" title=\"图书列表\">\r\n      <a-list size=\"large\">\r\n        <a-list-item :key=\"index\" v-for=\"(item, index) in bookList\">\r\n          <a-list-item-meta :description=\"item.bookstyle\">\r\n            <a-avatar slot=\"avatar\" size=\"large\" shape=\"square\" :src=\"item.avatar\"/>\r\n            <router-link\r\n              :to=\"{ name: 'BookDetailPage', params: { id: item.bookid}}\"\r\n              slot=\"title\"\r\n            >{{ item.bookname }}</router-link>\r\n            <!--            <a-button slot=\"title\" style=\"margin-left: 10px\" type=\"dashed\" @click=\"on_Click(item.bookid)\">{{item.bookname}}</a-button>-->\r\n          </a-list-item-meta>\r\n          <a-list-item-meta :description=\"item.author\"></a-list-item-meta>\r\n          <div slot=\"actions\">\r\n            <a>\r\n              <router-link :to=\"{name:'BookModifyPage',params:{id:item.bookid}}\">编辑</router-link>\r\n            </a>\r\n          </div>\r\n          <div slot=\"actions\">\r\n            <a-dropdown>\r\n              <a-menu slot=\"overlay\">\r\n                <!-- <a-menu-item><a>编辑</a></a-menu-item> -->\r\n                <a-menu-item>\r\n                  <a-popconfirm\r\n                    title=\"确定删除\"\r\n                    @confirm=\"(confirm(item.bookid))\"\r\n                    okText=\"Yes\"\r\n                    cancelText=\"No\"\r\n                  >\r\n                    <a>删除</a>\r\n                  </a-popconfirm>\r\n                </a-menu-item>\r\n              </a-menu>\r\n              <a>\r\n                更多\r\n                <a-icon type=\"down\"/>\r\n              </a>\r\n            </a-dropdown>\r\n          </div>\r\n        </a-list-item>\r\n        <!-- 分页 -->\r\n        <a-pagination\r\n          style=\"margin-left: 500px;margin-top: 10px\"\r\n          :pageSize=\"pageSize\"\r\n          @change=\"onChange\"\r\n          :current=\"current\"\r\n          :total=\"total\"\r\n        />\r\n      </a-list>\r\n    </a-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport HeadInfo from '@/components/tools/HeadInfo'\r\nimport { getBookList, getPagedBookList, deleteBookById } from '../../api/book'\r\n\r\nexport default {\r\n  name: 'BookListPage',\r\n  components: {\r\n    HeadInfo\r\n  },\r\n  data() {\r\n    return {\r\n      bookList: [],\r\n      current: 1,\r\n      total: 4,\r\n      pageSize: 3\r\n    }\r\n  },\r\n  created() {\r\n    // getBookList().then(res => {\r\n    //   // console.log(eval(res))\r\n    //   console.log(res.data)\r\n    //   this.bookList = res.data\r\n    // })\r\n    //分页\r\n    getPagedBookList(this.current, this.pageSize).then(res => {\r\n      console.log(res)\r\n      var data = res.result.data\r\n      // for(var i=0;i<data.length;i++){\r\n      //   data[i].avatar = \"http://localhost:91/images/\"+data[i].avatar\r\n      // }\r\n      this.bookList = data\r\n      this.total = res.result.total\r\n    })\r\n  },\r\n  methods: {\r\n    onChange(current) {\r\n      this.current = current\r\n      getPagedBookList(this.current, this.pageSize).then(res => {\r\n        // console.log(res)\r\n        var data = res.result.data\r\n        // for(var i=0;i<data.length;i++){\r\n        //   data[i].avatar = \"http://localhost:91/images/\"+data[i].avatar\r\n        // }\r\n        this.bookList = data\r\n        this.total = res.result.total\r\n      })\r\n    },\r\n    // on_Click(bookid){\r\n    //   this.$router.push({name:'BookDetailPage',params:{ id: bookid}})\r\n    // },\r\n    confirm(e) {\r\n      // console.log(e)\r\n      this.onDelete(e)\r\n    },\r\n    onDelete(bookid) {\r\n      // console.log(bookid)\r\n      deleteBookById(bookid).then(res => {\r\n        if (res.result === 'success') {\r\n          console.log(res.bookid)\r\n          this.$message.success('删除成功')\r\n        } else {\r\n          this.$message.error('删除失败')\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n"]}]}